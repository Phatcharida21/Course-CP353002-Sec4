package com.example.Controllerr;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.example.model.Customer;
import com.example.services.CustomerServices;

@RestController
@RequestMapping("/setter")
public class SetterCustomerController {
    
    private CustomerServices customerService; // ไม่ใช้ @Autowired ที่นี่
    
    // Setter Injection - ใช้อันเดียวพอ
    @Autowired
    public void setCustomerService(CustomerServices customerService) {
        this.customerService = customerService;
    }
    
    @GetMapping("/{id}") // GET http://localhost:8080/setter/15
    public String getCustomerById(@PathVariable Long id) {
        Customer cust = customerService.getCustomerById(id);
        return "Setter Injection : Id: " + cust.getId() + ", Name: " + cust.getName();
    }
    
    @GetMapping("/{id}/{name}") // GET http://localhost:8080/setter/10/Alice
    public String getCustomerByName(@PathVariable Long id, @PathVariable String name) {
        Customer cust = customerService.getCustomerByName(id, name);
        return "Setter Injection : Id: " + cust.getId() + ", Name: " + cust.getName();
    }
    
    @GetMapping("/customerlist") // GET http://localhost:8080/setter/customerlist
    public List<Customer> getCustomerList() {
        return customerService.getCustomerList();
    }
}